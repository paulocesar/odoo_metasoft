<script type='template' id='tpl-display-transferencias' class='tpl'>
    <div class="row">
        <div class="col-md-4 buttons-container">
            <div class='row'>
                <div class="col-md-6">
                    <button
                        class="btn btn-default btn-block"
                        data-toggle="modal"
                        data-target=".modal-transferencia-crud"
                    >
                        Adicionar
                    </button>
                </div>
                <div class='col-md-6'>
                </div>
            </div>
            <table class="table table-striped table-hover table-header" style='margin-right: 15px;'>
                <thead>
                    <tr>
                        <td class='col-md-2'>Contas</td>
                    </tr>
                </thead>
            </table>
            <div class="list-container">
                <table class="table table-striped table-hover">
                    <tbody class='list-transferencia-contas'>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8">
            <div class='row' id="transfereciaSearchForm">
                <div class='col-md-5'>
                    <input type='text' class='form-control query' name='query' placeHolder="buscar..." />
                </div>

                <div class='col-md-3'>
                    <select class='periodo form-control' name="periodo">
                        <option value="mes" selected>Meses</option>
                        <option value="dia">Dias</option>
                    </select>
                </div>
                <div class='col-md-4'>
                    <div class="input-group date-navigator">
                        <span class="input-group-addon decrement"><</span>
                        <input type="text" name="data" class="form-control mask-date-day data text-center">
                        <span class="input-group-addon increment">></span>
                    </div>
                </div>
            </div>
            <table class="table table-striped table-hover table-header" style='margin-right: 15px;'>
                <thead>
                    <tr>
                        <td class='col-md-3'>Data</td>
                        <td class='col-md-3'>Descrição</td>
                        <td class='col-md-3'>Conta</td>
                        <td class='col-md-3'>Valor</td>
                    </tr>
                </thead>
            </table>
            <div class="list-container">
                <table class="table table-striped table-hover">
                    <tbody class='list-transferencias'>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="modal fade modal-transferencia-crud" id="modalTransferencia" tabindex="-1" role="dialog" aria-labelledby="modalTransferencia" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Nova Movimentação</h4>
                </div>
                <div class="modal-body">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                    <button type="button" class="btn btn-success save">Salvar</button>
                </div>
            </div>
        </div>
    </div>
</script>

<script type='text/template' id='tpl-transferencia-crud'>
    <div class="form-horizontal">
        <div class="form-group">
            <label for="contaBancariaOrigemId" class="col-md-4 control-label">Origem</label>
            <div class="col-md-8">
                <select class='form-control' name="contaBancariaOrigemId">
                    <option value="">(conta externa)</option>
                    {% _.each(contas, function (c) { %}
                        <option value="{%= c.id %}">{%= c.banco %} / {%= c.agencia %} / {%= c.conta %}</option>
                    {% }); %}
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="contaBancariaDestinoId" class="col-md-4 control-label">Destino</label>
            <div class="col-md-8">
                <select class='form-control' name="contaBancariaDestinoId">
                    <option value="">(conta externa)</option>
                    {% _.each(contas, function (c) { %}
                        <option value="{%= c.id %}">{%= c.banco %} / {%= c.agencia %} / {%= c.conta %}</option>
                    {% }); %}
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="valor" class="col-md-4 control-label">Valor</label>
            <div class="col-md-8"><input type="text" name="valor" class="form-control valorLiquido not-zero mask-money-positive"></div>
        </div>
    </div>
</script>

<script type='text/template' id='tpl-transferencia-contas'>
    {% _.each(contas, function (c) { %}
        <tr class='conta clickable' data-rowid='{%= c.id %}'>
            <td> {%= c.banco %} / {%= c.agencia %} / {%= c.conta %}</td>
            <td class='money'>{%= Metasoft.money.html(c.saldo) %}</td>
        </tr>
    {% }); %}
</script>

<script type='text/template' id='tpl-transferencia-listItem'>
    {% _.each(transferencias, function (t) { %}
        {% var contaId = contaBancariaId == t.contaBancariaOrigemId ? t.contaBancariaDestinoId : t.contaBancariaOrigemId %}
        <tr class='conta clickable {%= contaBancariaId == t.contaBancariaOrigemId ? "invert-money-color" : "" %}' data-rowid='{%= t.id %}'>
            <td class='col-md-3'>{%= moment(t.data).format('DD/MM/YYYY') %} {%= t.cancelado ? 'CANCELADO' : '' %}</td>
            <td class='col-md-3'>{%= t.descricao %}</td>
            <td class='col-md-3'>{%= contaId %}</td>
            <td class='money col-md-3'>{%= Metasoft.money.html(t.valor) %}</td>
        </tr>
    {% }); %}
</script>
