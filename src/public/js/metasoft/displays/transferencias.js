// Generated by CoffeeScript 1.9.0
(function() {
  var Metasoft, Transferencias, fieldSearch, fieldValidator, jsRoot, _,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __hasProp = {}.hasOwnProperty;

  jsRoot = this;

  _ = jsRoot._, Metasoft = jsRoot.Metasoft;

  fieldValidator = Metasoft.fieldValidator, fieldSearch = Metasoft.fieldSearch;

  Transferencias = (function(_super) {
    __extends(Transferencias, _super);

    function Transferencias(opts) {
      this.renderAccounts = __bind(this.renderAccounts, this);
      this.renderTransferencias = __bind(this.renderTransferencias, this);
      this.doSearch = __bind(this.doSearch, this);
      this.onShow = __bind(this.onShow, this);
      this.model = 'transferencia';
      this.events = {
        'click tr.conta': 'onClickConta'
      };
      Transferencias.__super__.constructor.apply(this, arguments);
      this.tplAcctounts = _.template($('#tpl-transferencia-contas').html());
      this.search = fieldSearch({
        el: '#transfereciaSearchForm',
        model: this.model,
        action: 'list'
      });
      this.search.on('search:done', this.renderTransferencias);
    }

    Transferencias.prototype.onShow = function() {
      var data;
      data = {
        table: 'contaBancaria',
        withEmpresa: true
      };
      return this.post('crud/list', data, this.renderAccounts);
    };

    Transferencias.prototype.onClickConta = function(ev) {
      var contaId;
      return contaId = $(ev.currentTarget).data('rowid');
    };

    Transferencias.prototype.doSearch = function() {
      return this.search.doSearch();
    };

    Transferencias.prototype.renderTransferencias = function(data) {
      return console.log(data);
    };

    Transferencias.prototype.renderAccounts = function(contas) {
      return this.$('.list-transferencia-contas').html(this.tplAcctounts({
        contas: contas
      }));
    };

    return Transferencias;

  })(Metasoft.Display);

  Metasoft.displays.Transferencias = Transferencias;

}).call(this);
